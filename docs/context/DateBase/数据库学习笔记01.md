简介：基于MySql

# 绪论：

## 数据库系统概述

### 数据库的四个基本概念

- **数据：**

	数据(data)是数据库中存储的基本对象

- **数据库：**

	数据库（database，DB）是指长期存储在计算机内的，**有组织**，**可共享**的数据的**集合**。数据库中的数据按一定的数学模型组织、描述和存储，具有较小的冗余，较高的数据独立性和易扩展性，并可为各种用户共享。

- **数据库管理系统：**

	数据库管理系统(Database Management System)是一种操纵和管理数据库的大型软件，用于**建立**、**使用**和**维护**数据库，简称**DBMS**。它对数据库进行**统一的管理和控制**，以保证数据库的**安全性**和**完整性**。

	用户通过DBMS访问数据库中的数据，数据库管理员也通过dbms进行数据库的维护工作。它可使多个应用程序和用户用不同的方法在同时或不同时刻去建立，修改和询问数据库。大部分DBMS提供**数据定义语言DDL**（Data Definition Language）和**数据操作语言DML**（Data Manipulation Language），供用户定义数据库的模式结构与权限约束，实现对数据的追加、删除等操作。

	**数据库管理系统是数据库系统的核心**，是管理数据库的软件。数据库管理系统就是实现把用户意义下抽象的逻辑数据处理，转换成为计算机中具体的物理数据处理的软件。有了数据库管理系统，用户就可以在抽象意义下处理数据，而不必顾及这些数据在计算机中的布局和物理位置。

- **数据库系统：**

	数据库系统DBS（Data Base System，简称**DBS**）通常由**软件**、**数据库**和**数据管理员**组成。

	- 其软件主要包括操作系统、各种宿主语言、实用程序以及数据库管理系统。

	- 数据库由数据库管理系统统一管理，数据的插入、修改和检索均要通过数据库管理系统进行。

	- 数据管理员负责创建、监控和维护整个数据库，使数据能被任何有权使用的人有效使用。

	

	



<img src="https://raw.githubusercontent.com/yzl-eng/blogImage/main/img/202402290022420.svg" alt="引入数据库后计算机系统的层次结构.drawio"  />





## 数据库系统的结构

从数据库应用开发人员角度看，数据库系统通常采用**三级模式结构**，是数据库系统**内部**的系统结构。

从数据库最终用户角度看，数据库系统的结构分为:**单用户结构**、**主从式结构**、**分布式结构**、 **客户-服务器、浏览器-应用服务器／数据库服务器多层结构**等。



### 数据库系统模式的概念

在数据模型中有**”型“（type）**和**”值“（value）**的概念

- 型（Type） 对某一类数据的结构和属性的说明
- 值（Value） 是型的一个具体赋值

**模式（Schema）**

- 数据库逻辑结构和特征的描述
- 是型的描述，不涉及具体值
- 反映的是数据的结构及其联系
- 模式是相对稳定的

**实例（Instance）**

- 模式的一个具体值
- 反映数据库某一时刻的状态
- 同一个模式可以有很多实例
- 实例随数据库中的数据的更新而变动



### 数据库系统的三级模式结构



![数据库三级模式结构](https://raw.githubusercontent.com/yzl-eng/blogImage/main/img/202402290023910.png)



1. **模式（Schema）**
	模式（也称逻辑模式）：数据库中全体数据的**逻辑结构**和**特征**的描述， 所有用户的公共数据视图。

	**一个数据库只有一个模式。**

	模式的地位：是数据库系统模式结构的中间层，与数据的物理存储细节和硬件环境无关， 与具体的应用程序、开发工具及高级程序设计语言无关。

	模式的定义：数据的逻辑结构（数据项的名字、类型、取值范围等）、数据之间的联系、 数据有关的安全性、完整性要求。	

2. **外模式（External Schema）**

	外模式（也称子模式或用户模式）：数据库用户（包括应用程序员和最终用户）使用的局 部数据的逻辑结构和特征的描述、数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。

	外模式的地位：介于模式与应用之间
	模式与外模式的关系：一对多。外模式通常是模式的子集，一个数据库可以有多个外模式。反映了不同的用户的应用需求、看待数据的方式、对数据保密的要求，对模式中同一数据，在外模式中的结构、类型、长度、保密级别等都可以不同。

	外模式与应用的关系：一对多。同一外模式也可以为某一用户的多个应用系统所使用，但一个应用程序只能使用一个外模式。

	外模式的用途：
	保证数据库安全性的一个有力措施、每个用户只能看见和访问所对应的外模式中的数据。

3. **内模式（Internal Schema）**

	内模式（也称存储模式）：
	是数据**物理结构**和**存储方式**的描述。
	是数据在数据库内部的表示方式、记录的存储方式（例如，顺序存储，按照B树结构存储，按hash方法存储等）索引的组织方式，数据是否压缩存储，数据是否加密，数据存储记录结构的规定。

	**一个数据库只有一个内模式。**
	
	
	
### 数据库的二级映像功能与数据独立性

**1.外模式/模式映像**

- 对每一个外模式，有一个外模式/模式映像（所以上图中有三个外模式/模式映像）。

	> 定义外模式与模式之间的对应关系
	> 映像定义通常包含在各外模式的描述中

- 保证数据的逻辑独立性

	> 当模式改变时，数据库管理员对外模式/模式映像作相应改变，使外模式不变
	> 应用程序是依据数据的外模式编写的，应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性。

 **2.模式/内模式映像**

> 定义了数据全局逻辑结构与存储结构之间的对应关系。
> 数据库中模式/内模式映像是唯一的。
> 该映像定义通常包含在模式描述中。
> 保证数据的物理独立性

- 当数据库的存储结构改变了（例如选用了另一种存储结构），数据库管理员修改模式/内模式映像，使模式保持不变。
- 模式不变，则应用程序不变。保证了数据与程序的物理独立性，简称数据的物理独立性。

数据库的二级映像功能保证了应用程序的稳定性，除非应用需求本身发生变化，否则应用程序一般不需要修改。

以程序为中心发展为以数据为中心，具有了数据与程序之间的独立性，使得数据的定义和描述可以从应用程序中分离出去。

数据的存取由数据库管理系统管理，简化了应用程序的编制，大大减少了应用程序的维护和修改。



# 关系数据库





## NoSQL的优点/缺点

优点:

- \- 高可扩展性
- \- 分布式计算
- \- 低成本
- \- 架构的灵活性，半结构化数据
- \- 没有复杂的关系

缺点:

- \- 没有标准化
- \- 有限的查询功能（到目前为止）
- \- 最终一致是不直观的程序

## BASE

BASE：Basically Available, Soft-state, Eventually Consistent。 由 Eric Brewer 定义。

CAP理论的核心是：一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求，最多只能同时较好的满足两个。

BASE是NoSQL数据库通常对可用性及一致性的弱要求原则:

- Basically Available --基本可用
- Soft-state --软状态/柔性事务。 "Soft state" 可以理解为"无连接"的, 而 "Hard state" 是"面向连接"的，类似UDP/TCP？
- Eventually Consistency -- 最终一致性， 也是 ACID 的最终目的。

## NoSQL 数据库分类

|     类型      | 部分代表                   | 特点                                                         |
| :-----------: | -------------------------- | ------------------------------------------------------------ |
|    列存储     | Hbase/Cassandra/Hypertable | 顾名思义，是按列存储数据的。最大的特点是方便存储结构化和半结构化数据，方便做数据压缩，对针对某一列或者某几列的查询有非常大的IO优势。 |
|   文档存储    | MongoDB/CouchDB            | 文档存储一般用类似json的格式存储，存储的内容是文档型的。这样也就有机会对某些字段建立索引，实现关系数据库的某些功能。 |
| key-value存储 | MemcacheDB/Redis           | 可以通过key快速查询到其value。一般来说，存储不管value的格式，照单全收。（Redis包含了其他功能） |
|    图存储     | Neo4J/FlockDB              | 图形关系的最佳存储。使用传统关系数据库来解决的话，性能低下，而且设计使用不方便。 |
|   对象存储    | db4o/Versant               | 通过类似面向对象语言的语法操作数据库，通过对象的方式存取数据。 |
|   xml数据库   | Berkeley DB XML/BaseX      | 高效的存储XML数据，并支持XML的内部查询语法，比如XQuery,Xpath。 |
